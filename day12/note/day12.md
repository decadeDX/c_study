# 嵌入式学习 c语言基础： day12



# 文件指针

## 概念

- 文件指针FILE* 类型本质上是一个结构体指针，这个指针由系统自动进行管理，我们只需要获取到进行操作即可。

## 文件操作函数

###  fopen

- FILE* fopen(const char* fname, const char* mod);

  - 以mod的方式打开一个名称为fname的文件，如果成功就返回相应的文件指针，如果失败就返回空。

  - fname
    - 主要填写的是文件的路径，有相对路径（从当前路径开始逐步跳转到指定路径）和绝对路径（从盘符开始逐步跳转到指定路径）之分

  - mod

    - r：以只读的形式打开文件。如果文件存在就代开，不存在打开失败

    - w：以只写的方式打开文件。 如果文件存在则覆盖，不存在就直接创建文件

    - a：以只写追加的方式打开文件。文件存在就打开并且将文件指针移动文件末尾，文件不存在就创建

  - 基于mod方式的可选项

    - +：原本只读/只写的方式变为可读可写

    - b：以二进制的方式打开文件

###  fclose

- 操作完文件之后需要对文件进行关闭，否则后期再打开文件的时候会出现问题，或者导致文件的修改结果无法保存。
  - int fclose(FILE* fp);

###  fputs

- int fputs(const char* buffer, FILE* fp);
  - 将buffer的内容打印到文件指针fp的位置。

###  fgets

- int fgets(char* buffer, size_t size, FILE* fp);

  - 将fp中的文件内容按行转移到buffer中，至多转移size个字节

  - 注意点：函数中保存最大的读取大小是size-1个字符，因为字符串以\0，为了保证字符串的完整性，给结束标识要留一个位置。

###  fprintf

- int fprintf(FILE* fp, const char* format,...);
  - 将原本要输出到屏幕中的内容打印到文件fp中

###  fgetc

- 获取单个字符

###  fput

- 将单个字符打印到文件中

###  fread

- 函数原型：size_t fread(void* buffer, size_t elesize, size_t n, FILE* fp);
  - 从文件中读取elesize*n个字节的内容放到buffer中

###  fwrite

- 函数原型：size_t fwrite(void* buffer, size_t elesize, size_t n, FILE* fp);
  - 将buffer中长度为elemsize*n个字节的内容以二进制的形式写入到文件中



### feof

- 函数原型：int feof(FILE* fp);
  - 用于判断文件是否已经到了末尾，如果文件已经达到末尾就返回1，否则返回0

### fseek

- 函数原型：int fseek(FILE* fp, size_t offset, int origin); 

  - 以origin为基准，使文件指针跳转offset个字节，如果为正数代表向后跳转，如果为负数，代表向前跳转

  - 跳转基准

    - SEEK_SET：以头部为基准跳转

    - SEEK_CUR：以当前位置为基准跳转

    - SEEK_END：以尾部位置为基准跳转

### ftell

- 函数原型：size_t ftell(FILE* fp);
  - 查询当前文件指针距离头文件的字节数





# c++语言基础： day12

# C++基础

## 输入和输出

- 头文件：iostream：input ouput stream 代表输入输出流

- cout：C++的输出，cout紧跟左移运算符。例如：cout << 表达式1 << 表达式2 << ....;

- cin：C++的输入，cin紧跟右移运算符。例如：cin >> 变量1 >> 变量2....;

- endl：end of line，主要作用是换行。

## new和delete

- 作用：分配动态空间

- 语法

  - 分配单个空间：new 类型名(初始值)

  - 分配连续空间：new 类型名[元素个数]

- delete释放空间

  - 删除的是单个内存：delete 指针名

  - 删除的是多个内存：delete[] 指针名

静态数组空间的生命周期会随着函数的结束而结束，所以不能从函数中返回数组

动态的空间不会随着函数结束而结束，必须手动销毁才能释放。

## 引用

引用概念：是已有变量或者表达式的一种别名机制，主要用于函数的形参和返回值。

作用：给变量起别名

语法：数据类型 &别名 = 原名;



## 内联函数

### 概念

- 对于一些规模较小并且会被频繁调用的函数可以定义为内联函数，以提高程序的执行效率，内联函数不是在调用的时候发生控制转移的，而是在编译的时候，直接将对应函数的函数体内嵌到每个函数的调用处，从而节省函数调用的资源开销，但是会增加编译后的程序空间。相当于用空间换时间。

### 图示

![img](D:\c_study\day12\note\1.png)

### 定义方式：

inline 函数类型 函数名(参数列表);

### 注意点：

- 并不是所有的函数都可以直接定义为内联函数，如果函数内部的结构稍复杂，那么就算定义了内联函数，程序也会将其当做普通函数来对待。

- 复杂场景：比如循环、分支等情况，即使定义了内联函数，也不会将其当做内联函数对待。

## 函数重载

### 概念

- C++允许定义多个同名函数，只要保证形参类型或者形参个数不同即可。

- 函数的返回值类型（函数的类型）不能作为重载依据的。

## 函数的默认参数

### 概念

- 定义函数的时候，可以预先为函数形参指定默认值，在函数调用的时候，如果给了实参，就使用实参的值，否则就采用默认值。

### 注意点：

- 默认形参的定义顺序必须是由右向左来完成，如果某一个形参有默认值，那么它右侧的所有形参必须都有默认值。
